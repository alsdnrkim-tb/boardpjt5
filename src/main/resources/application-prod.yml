# === 환경별 설정 파일 가이드 ===

# application-dev.yml (개발 환경)
# 개발자 로컬 환경에서 사용하는 설정
# - 로컬 데이터베이스 연결 정보
# - 상세한 로깅 설정
# - 개발 편의 기능 활성화

spring:
  data:
    redis:
      host: ${REDIS_HOST}
      username: ${REDIS_USERNAME}
      password: ${REDIS_PASSWORD}
      port: ${REDIS_PORT}
      ssl:
        enabled: true
  datasource:
    # https://console.aiven.io/
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: validate
# JWT
jwt:
  # https://jwtsecrets.com/
  secret: ${JWT_SECRET}
  expiry:
    access: 3600000    # 1시간
    refresh: 86400000 # 7일
#
#logging:
#  level:
#    com.example.boardpjt: DEBUG
#    org.springframework.security: DEBUG



---
# application-prod.yml (운영 환경)  
# 실제 서비스 운영 환경에서 사용하는 설정
# - 운영 데이터베이스 연결 정보
# - 보안 강화 설정
# - 성능 최적화 설정

#spring:
#  datasource:
#    url: jdbc:mysql://prod-db-server:3306/boardpjt_prod?useSSL=true&serverTimezone=Asia/Seoul
#    username: ${DB_USERNAME}     # 환경변수로 관리
#    password: ${DB_PASSWORD}     # 환경변수로 관리
#    hikari:                      # 커넥션 풀 설정
#      maximum-pool-size: 20
#      minimum-idle: 5
#      connection-timeout: 30000
#      
#  jpa:
#    hibernate:
#      ddl-auto: validate         # 운영환경에서는 스키마 변경 금지
#    show-sql: false             # 운영환경에서는 SQL 출력 비활성화
#    properties:
#      hibernate:
#        format_sql: false       # 포맷팅도 비활성화
#        
#jwt:
#  secret: ${JWT_SECRET}         # 환경변수로 관리 (보안)
#  expiry:
#    access: 1800000             # 30분 (보안 강화)
#    refresh: 604800000          # 7일
#
#server:
#  port: 8080
#  compression:
#    enabled: true               # 성능 최적화
#    
#logging:
#  level:
#    com.example.boardpjt: INFO  # 운영환경에서는 INFO 레벨
#    org.springframework.security: WARN
#  file:
#    name: /var/log/boardpjt.log # 로그 파일 저장

---
# === 보안 고려사항 ===

# 1. 민감한 정보는 환경변수로 관리:
#    - 데이터베이스 비밀번호
#    - JWT 시크릿 키  
#    - API 키 등

# 2. Profile별 설정 분리:
#    - 개발: 편의성 중심
#    - 운영: 보안과 성능 중심

# 3. 설정 파일 관리:
#    - application.yml: 공통 설정, 버전 관리 포함
#    - application-{profile}.yml: 환경별 설정, 민감정보 제외
#    - 민감한 설정은 환경변수나 외부 설정 서버 활용

# === 성능 최적화 고려사항 ===

# 1. 운영환경 설정:
#    - show-sql: false (성능 향상)
#    - 커넥션 풀 최적화
#    - HTTP 압축 활성화

# 2. 개발환경 설정:
#    - show-sql: true (디버깅 편의)
#    - format_sql: true (가독성)
#    - ddl-auto: update (스키마 자동 관리)